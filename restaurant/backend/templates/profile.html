{% extends 'base.html' %} {% load static %} {% block title %}{{ user.username}}'s Profile{% endblock %}

{% block content %}
<div class="profile-container">
  <h2>{{ user.username }}'s Profile</h2>

  <div class="profile-info card">
    <!-- Profile Picture -->
    <div class="profile-picture-section">
      {% if user.profile.profile_picture %}
      <img
        src="{{ user.profile.profile_picture.url }}"
        alt="{{ user.username }}'s Profile Picture"
        class="profile-picture"
      />
      {% else %}
      <img
        src="{% static 'images/avatar.svg' %}"
        alt="Default Profile"
        class="profile-picture"
      />
      {% endif %}
    </div>

    <!-- User Info -->
    <div class="profile-details">
      <p><strong>Username:</strong> {{ user.username }}</p>
      <p><strong>Name:</strong> {{ user.profile.name }}</p>
      <p><strong>Email:</strong> {{ user.email }}</p>
      <p><strong>Bio:</strong> {{ user.profile.bio }}</p>
      {% comment %} <p><strong>Phone:</strong> {{ user.profile.phone }}</p> {% endcomment %}
      {% for addr in user.address_set.all %}
      <div class="address-card">
        <p>
          <strong>Address:</strong> {{ addr.line1 }}, {{ addr.city }}, {{addr.state }} - {{ addr.pincode }}
        </p>
        <p><strong>Phone:</strong> {{ user.profile.phone }}</p>
      </div>
      {% empty %}
      <p>
        No address saved yet.
        <a href="{% url 'restaurant:manage_address' %}">Add one now</a>.
      </p>
      {% endfor %}
      <a href="{% url 'restaurant:manage_address' %}" class="btn">Manage Addresses</a>
    </div>
    <a href="{% url 'restaurant:edit-profile' %}" class="btn">Edit Profile</a>
  </div>
</div>
<style>
  .profile-container {
    max-width: 800px;
    margin: 40px auto;
    padding: 20px;
    font-family: "Poppins", sans-serif;
  }

  .profile-container h2 {
    text-align: center;
    margin-bottom: 30px;
    color: #333;
  }

  .profile-info {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    border-radius: 8px;
    background-color: #f9f9f9;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  .profile-picture-section {
    margin-bottom: 20px;
  }

  .profile-picture {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid #007bff;
  }

  .profile-details {
    text-align: center;
    margin-bottom: 20px;
  }

  .profile-details p {
    margin: 8px 0;
    color: #555;
  }

  .btn {
    display: inline-block;
    padding: 10px 20px;
    background-color: #007bff;
    color: #fff;
    text-decoration: none;
    border-radius: 5px;
    transition: background-color 0.3s ease;
  }

  .btn:hover {
    background-color: #0056b3;
  }
  .address-card {
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 6px;
    padding: 15px 9px;
    margin: 10px 0;
    text-align: left;
    width: 96%;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
  }
  .address-card p {
    margin: 6px 0;
    color: #444;
  }

</style>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const toasts = document.querySelectorAll(".toast");
    toasts.forEach((toast) => {
      setTimeout(() => {
        toast.classList.add("hide");
      }, 3000); // hide after 3 seconds
    });
  });
</script>
{% endblock %}
